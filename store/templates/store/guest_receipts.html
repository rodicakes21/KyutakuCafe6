{% extends "store/base.html" %}

{% block title %}My Receipts{% endblock %}

{% block content %}

<h2 style="text-align:center; color:#FFB3E6; margin-top:20px;">
    My Receipts
</h2>

{% if orders %}
    <div style="max-width:700px; margin:20px auto;">
        {% for order in orders %}
            <div style="
                background:rgba(40,15,55,0.8);
                padding:15px;
                margin-bottom:15px;
                border-radius:12px;
                border:2px solid #FF8AD4;
            ">
                <p><strong>Receipt #{{ order.id }}</strong></p>
                <p>Date: {{ order.created_at|date:"F d, Y h:i A" }}</p>
                <p>Total: â‚±{{ order.total_price }}</p>

                <!-- Payment Status -->
                <p>
                    <strong>Status:</strong>
                    {% if order.payment_status == "unpaid" %}
                        <span style="color:#FF6BAA;">Unpaid</span>
                    {% elif order.payment_status == "pending" %}
                        <span style="color:#FFD700;">Pending Verification</span>
                    {% else %}
                        <span style="color:#7CFF7C;">Paid</span>
                    {% endif %}
                </p>

                <!-- Pay Now button ONLY -->
                {% if order.payment_status == "unpaid" %}
                <a href="{% url 'cashier_payment' order.id %}"
                   style="
                        display:inline-block;
                        padding:10px 16px;
                        background:#FF4FA8;
                        color:white;
                        border-radius:8px;
                        text-decoration:none;
                        font-weight:bold;
                        box-shadow:0 0 8px #FF4FA8;
                   ">
                    Pay Now
                </a>
                {% endif %}

            </div>
        {% endfor %}
    </div>

{% else %}
    <p style="text-align:center; margin-top:30px;">
        No receipts found for this device.
    </p>
{% endif %}

{% endblock %}


